{"ast":null,"code":"import React,{useEffect,useRef}from\"react\";import L from\"leaflet\";import\"leaflet/dist/leaflet.css\";import markerIcon from\"../images/marker-icon.png\";import{getDistance,getZoom,getcentrMap}from\"../fakeApi\";import{jsx as _jsx}from\"react/jsx-runtime\";var iconStyle=L.icon({iconUrl:markerIcon,iconSize:[30,31],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],title:\"Початковий пункт\",alt:\"Початковий пункт\"});var MapWithRoute=function MapWithRoute(_ref){var shipment=_ref.shipment;var mapContainerRef=useRef(null);var mapRef=useRef(null);useEffect(function(){var centrMap=getcentrMap(shipment);var distance=getDistance(shipment.originRoute,shipment.destinationRoute);var zoom=getZoom(distance);var coordinates=[[shipment.originRoute.lat,shipment.originRoute.lng],[shipment.destinationRoute.lat,shipment.destinationRoute.lng]];mapRef.current=L.map(mapContainerRef.current).setView(centrMap,zoom);L.tileLayer(\"https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\",{attribution:'Map data &copy; <a href=\"https://www.google.com/\">Google</a>',subdomains:[\"mt0\",\"mt1\",\"mt2\",\"mt3\"],maxZoom:20}).addTo(mapRef.current);// Додавання маркерів\niconStyle=L.icon({iconUrl:markerIcon,iconSize:[30,31],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],title:\"Початковий пункт\",alt:\"Початковий пункт\"});L.marker(shipment.originRoute,{icon:iconStyle}).addTo(mapRef.current);iconStyle=L.icon({iconUrl:markerIcon,iconSize:[30,31],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41],title:\"Кінцевийвий пункт\",alt:\"Кінцевийвий пункт\"});L.marker(shipment.destinationRoute,{icon:iconStyle}).addTo(mapRef.current);// Додавання лінії маршруту\nvar routeLine=L.polyline(coordinates).addTo(mapRef.current);// Збільшення масштабу, щоб лінія маршруту була видимою\nmapRef.current.fitBounds(routeLine.getBounds());// Очищення мапи під час розмонтування компонента\nreturn function(){mapRef.current.remove();};},[shipment]);return/*#__PURE__*/_jsx(\"div\",{ref:mapContainerRef,style:{height:\"400px\"}});};export default MapWithRoute;","map":{"version":3,"names":["React","useEffect","useRef","L","markerIcon","getDistance","getZoom","getcentrMap","jsx","_jsx","iconStyle","icon","iconUrl","iconSize","iconAnchor","popupAnchor","shadowSize","title","alt","MapWithRoute","_ref","shipment","mapContainerRef","mapRef","centrMap","distance","originRoute","destinationRoute","zoom","coordinates","lat","lng","current","map","setView","tileLayer","attribution","subdomains","maxZoom","addTo","marker","routeLine","polyline","fitBounds","getBounds","remove","ref","style","height"],"sources":["C:/vscode/logistik-company/src/components/MapWithRoute.jsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport markerIcon from \"../images/marker-icon.png\";\r\nimport { getDistance, getZoom, getcentrMap } from \"../fakeApi\";\r\nvar iconStyle = L.icon({\r\n  iconUrl: markerIcon,\r\n  iconSize: [30, 31],\r\n  iconAnchor: [12, 41],\r\n  popupAnchor: [1, -34],\r\n  shadowSize: [41, 41],\r\n  title: \"Початковий пункт\",\r\n  alt: \"Початковий пункт\",\r\n});\r\n\r\nconst MapWithRoute = ({ shipment }) => {\r\n  const mapContainerRef = useRef(null);\r\n  const mapRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const centrMap = getcentrMap(shipment);\r\n    const distance = getDistance(\r\n      shipment.originRoute,\r\n      shipment.destinationRoute\r\n    );\r\n    const zoom = getZoom(distance);\r\n    const coordinates = [\r\n      [shipment.originRoute.lat, shipment.originRoute.lng],\r\n      [shipment.destinationRoute.lat, shipment.destinationRoute.lng],\r\n    ];\r\n\r\n    mapRef.current = L.map(mapContainerRef.current).setView(centrMap, zoom);\r\n\r\n    L.tileLayer(\"https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\", {\r\n      attribution:\r\n        'Map data &copy; <a href=\"https://www.google.com/\">Google</a>',\r\n      subdomains: [\"mt0\", \"mt1\", \"mt2\", \"mt3\"],\r\n      maxZoom: 20,\r\n    }).addTo(mapRef.current);\r\n\r\n    // Додавання маркерів\r\n\r\n    iconStyle = L.icon({\r\n      iconUrl: markerIcon,\r\n      iconSize: [30, 31],\r\n      iconAnchor: [12, 41],\r\n      popupAnchor: [1, -34],\r\n      shadowSize: [41, 41],\r\n      title: \"Початковий пункт\",\r\n      alt: \"Початковий пункт\",\r\n    });\r\n    L.marker(shipment.originRoute, { icon: iconStyle }).addTo(mapRef.current);\r\n\r\n    iconStyle = L.icon({\r\n      iconUrl: markerIcon,\r\n      iconSize: [30, 31],\r\n      iconAnchor: [12, 41],\r\n      popupAnchor: [1, -34],\r\n      shadowSize: [41, 41],\r\n      title: \"Кінцевийвий пункт\",\r\n      alt: \"Кінцевийвий пункт\",\r\n    });\r\n\r\n    L.marker(shipment.destinationRoute, { icon: iconStyle }).addTo(\r\n      mapRef.current\r\n    );\r\n    // Додавання лінії маршруту\r\n    const routeLine = L.polyline(coordinates).addTo(mapRef.current);\r\n\r\n    // Збільшення масштабу, щоб лінія маршруту була видимою\r\n    mapRef.current.fitBounds(routeLine.getBounds());\r\n\r\n    // Очищення мапи під час розмонтування компонента\r\n    return () => {\r\n      mapRef.current.remove();\r\n    };\r\n  }, [shipment]);\r\n\r\n  return <div ref={mapContainerRef} style={{ height: \"400px\" }} />;\r\n};\r\n\r\nexport default MapWithRoute;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}